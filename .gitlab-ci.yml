image: docker.diconium.com:443/diconium/hub/mirror/node:14.18.1
stages:
  - master

# job that deploys gitlab pages
pages:
  stage: master
  before_script:
  - npm install
  - echo build npm
  script:
  - echo pages url = $CI_PAGES_URL
  - npm run build
  - npm run start
  - echo 'build done'
  artifacts:
    paths:  
    - public
  rules:
    # This ensures that only pushes to the default branch will trigger
    # a pages deploy
    - if: $CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH
 